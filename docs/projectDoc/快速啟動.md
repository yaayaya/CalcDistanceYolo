# DistanceVideo 快速啟動指南

## 🚀 快速開始

### 1. 安裝相依套件

```powershell
pip install -r requirements.txt
```

### 2. 啟動服務

```powershell
cd backend
python main.py
```

看到以下訊息表示啟動成功:
```
✅ 服務啟動完成!
📍 播放頁面: http://localhost:8000/player.html
📍 後台管理介面: http://localhost:8000/admin.html
📍 API 文件: http://localhost:8000/docs
```

### 3. 開啟後台管理

瀏覽器訪問: http://localhost:8000/admin.html

### 4. 上傳影片

1. 點擊左側選單「影片管理」
2. 選擇影片檔案(支援 MP4, WebM, OGG)
3. 點擊「上傳影片」
4. 上傳完成後,點擊「設為主影片」

**建議影片格式**:
- 格式: WebM (VP9 編碼)
- 解析度: 1920x1080
- 位元率: 5-8 Mbps
- 最大檔案: 500MB

### 5. 調整參數

#### 影片控制參數
- **基礎播放速度**: 無人時的播放速度 (建議 1.0)
- **最大播放速度**: 人最接近時的速度 (建議 10.0)
- **速度轉換時間**: 速度變化的平滑時間 (建議 500ms)

#### 距離偵測校準
- **最小距離**: 觸發最大速度的距離 (建議 50cm)
- **最大距離**: 回復基礎速度的距離 (建議 500cm)
- **平滑係數**: 距離抖動過濾強度 (建議 0.3)

### 6. 開啟播放頁面

瀏覽器訪問: http://localhost:8000/player.html

### 7. 快捷鍵

在播放頁面:
- **Ctrl + Shift + D**: 切換除錯模式
- **Ctrl + Shift + E**: 切換展覽模式(全螢幕)

## 📋 使用流程圖

```
[啟動服務] → [後台管理] → [上傳影片] → [設定參數] → [播放頁面] → [測試互動]
```

## 🎯 常見問題

### Q1: 影片無法播放?
**A**: 檢查:
1. 是否已在後台設定「設為主影片」
2. 影片格式是否支援(MP4/WebM/OGG)
3. 瀏覽器控制台是否有錯誤訊息

### Q2: 距離偵測沒有反應?
**A**: 檢查:
1. WebSocket 連線狀態(除錯面板)
2. 攝影機是否正常運作
3. sensor_config.json 配置是否正確

### Q3: 播放速度變化太突兀?
**A**: 調整:
1. 增加「速度轉換時間」(500-1000ms)
2. 提高「平滑係數」(0.3-0.5)
3. 增加「距離變化閾值」(10-20cm)

### Q4: 多人時如何控制?
**A**: 
- 預設自動選取「距離最近的人」
- 可在「距離偵測校準」關閉「多人時選取最近的人」

### Q5: 如何重置所有設定?
**A**:
- 後台管理底部點擊「重置為預設值」按鈕

## 🎨 展示模式設定

### 正常展示
```json
{
  "baseSpeed": 1.0,
  "maxSpeed": 10.0,
  "minDistance": 50,
  "maxDistance": 500,
  "exhibitionMode": true
}
```

### 快速反應
```json
{
  "baseSpeed": 2.0,
  "maxSpeed": 15.0,
  "transitionTime": 300,
  "exhibitionMode": true
}
```

### 慢速藝術
```json
{
  "baseSpeed": 0.5,
  "maxSpeed": 5.0,
  "transitionTime": 1000,
  "exhibitionMode": true
}
```

## 🔧 進階設定

### 反向模式(距離近播放慢)
1. 開啟「影片控制參數」
2. 勾選「反向模式」
3. 儲存設定

### 除錯資訊顯示
1. 開啟「顯示模式控制」
2. 勾選「除錯模式」
3. 選擇要顯示的資訊項目

### 攝影機預覽
1. 開啟「顯示模式控制」
2. 勾選「顯示攝影機預覽」
3. 播放頁面左下角顯示即時畫面

## 📊 效能建議

### 8小時穩定運行
- 使用 WebM 格式影片
- 關閉不必要的除錯資訊
- 定期監控記憶體使用
- 建議解析度 1920x1080(非 4K)

### 流暢播放
- 目標 FPS: 30
- 廣播間隔: 33ms
- 啟用硬體加速

## 🎬 影片建議

### 適合的影片內容
- ✅ 敘事性影片(故事發展)
- ✅ 風景縮時攝影
- ✅ 抽象動態圖形
- ✅ 循環動畫

### 不適合的內容
- ❌ 包含文字的影片(快速播放難以閱讀)
- ❌ 需要精確音訊同步的內容
- ❌ 極短片段(< 10秒)

## 📞 支援

遇到問題請查看:
1. 瀏覽器開發者工具 Console
2. 後端終端機輸出
3. `/docs` API 文件
4. `docs/projectDoc/` 專案文件

---

**祝您展示成功! 🎉**
